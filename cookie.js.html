<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: cookie.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: cookie.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var tc = require('tough-cookie');

var noop = function(){};

var modifiable = [
  'key'
, 'value'
, 'expires'
, 'maxAge'
, 'domain'
, 'path'
, 'secure'
, 'httpOnly'
, 'extensions'
];

var readOnly = [
  'hostOnly'
, 'creation'
, 'lastAccessed'
, 'pathIsDefault'
];


/**
 * HTTP Cookie
 * @constructor
 * @param {String|Object} data can be a cookie header string or a json object
 */
var Cookie = function(data) {
  var self = this;
  this._cookie = new tc.Cookie();

  modifiable.map(function(attribute) {
    Object.defineProperty(self, attribute, {
    enumerable: true
    , get: function() {
        return self._cookie[attribute];
      }
    , set: function(val) {
        self._cookie[attribute] = val;
      }
    });
  });

  readOnly.map(function(attribute) {
    Object.defineProperty(self, attribute, {
      get: function(){
        return this._cookie[attribute];
      }
    , set: noop
    , enumerable: true
    });
  });

  this.set(data);
};

/**
 * Get cookie as a cookie header string
 * @return {String}
 */
Cookie.prototype.getCookieHeaderString = function() {
  return this._cookie.cookieString();
};

/**
 * Set multiple cookie properties at once
 * @param {String|Object} data
 */
Cookie.prototype.set = function(data) {
  if (!data) return;

  if (typeof data === 'string') {
    this._cookie = tc.Cookie.parse(data);
    return;
  }

  if (typeof data === 'object') {
    for (key in data) {
      if (!data.hasOwnProperty(key)) continue;
      if (modifiable.indexOf(key) &lt; 0) continue;
      this[key] = data[key];
    }
    return;
  }

  throw Error("data parameter must be string or object.");
};

/**
 * Get cookie as a JSON object
 * @return {Object}
 */
Cookie.prototype.toJSON = function() {
  return {
    key: this.key
  , value: this.value
  , expires: this.expires
  , maxAge: this.maxAge
  , domain: this.domain
  , path: this.path
  , secure: this.secure
  , httpOnly: this.httpOnly
  , extensions: this.extensions
  };
};

module.exports = Cookie;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Classes</h3><ul><li><a href="Cookie.html">Cookie</a></li><li><a href="CookieJar.html">CookieJar</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha3</a> on Sun Jan 19 2014 12:37:37 GMT-0600 (CST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
